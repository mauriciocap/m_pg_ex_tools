<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <title>Your fastapp name here</title>
    </head>
    <body>
        <div class="app">
            <h1>FastApp Tools Ex</h1>
        </div>
        <script type="text/javascript" src="phonegap.js"></script>
        <script type="text/javascript" src="js/3p/zepto.min.js"></script>
	<!-- UI{ -->
  <script type='text/javascript' src="3p/sencha_touch/sencha-touch-all.js"></script>
  <link rel="stylesheet" type="text/css" href="3p/sencha_touch/resources/css/sencha-touch.css">
	<!-- }UI -->
	<!-- MAPS{ -->
  <script type='text/javascript' src="3p/leaflet/leaflet-src.js"></script>
  <link rel="stylesheet" type="text/css" href="3p/leaflet/leaflet.css">
  <style type='text/css'> .my_div_icon svg { width: 20px; height: 20px; } </style>
  <!-- for google maps -->
  <script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
  <script src="3p/leaflet-plugins/layer/tile/Google.js"></script>
	<!-- }MAPS -->

        <script type="text/javascript">

	function onFail(d) {
		alert("ERROR "+d);
	}

	function getFile(path, cb) {
		var readAsText= function (file) {
        var reader = new FileReader();
        reader.onloadend = function(evt) {
            alert("READ TXT "+evt.target.result);
						cb(evt.target.result);	
        };
        reader.readAsText(file);
    };

		var onGotFile= function (file) { readAsText(file); }

		var onGotFileEntry= function (fileEntry) { fileEntry.file(onGotFile,onFail); }

		var onGotFs= function (fileSystem) {
			fileSystem.root.getFile(path, {create: false}, onGotFileEntry, onFail);
		}
		alert("GETTING FILE '"+path+"'");
		window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onGotFs, onFail);
	} 
    
	function getHttp(url,cb) {
		alert("GETTING '"+url+"'");
		$.ajax({
			url: url,
			success: function(data){
					alert("GOT "+data);
					cb(data);
			},
			error: onFail
		});
	}

	function jsSet(txt) { $('#inJs').val(txt); }
	function pathGet() { return $('#inUrl').val(); }

	function pathSetDflt() {
		$('#inUrl').val("https://raw.githubusercontent.com/mauriciocap/m_pg_ex_tools/master/examples.js");
	}

//UI{
///DIALOG{
//FROM: http://sureshdotariya.blogspot.com.ar/2013/04/how-to-show-alert-dialog-box-in-sencha.html
function dialogShow(msg) {
	Ext.Msg.show({
           title: 'Status',
           message: msg || 'Your message here',
          // width: 500,
           buttons: Ext.MessageBox.YESNOCANCEL,
           iconCls: Ext.MessageBox.INFO,
           fn: function(buttonId) {
             alert('You pressed the "' + buttonId + '" button.');
           }
	});
}
//}DIALOG
//}UI

 	var Initialized= false;
 	function appReady() {
		if (Initialized) { return true; }
		Initialized= true;

		$('#btnGet').on('click', function () { try { getHttp(pathGet(),jsSet);} catch(e) { alert("ERR:"+e) }; return false; });
		$('#btnFile').on('click', function () { try { getFile(pathGet(),jsSet); } catch(e) { alert("ERR:"+e) }; return false; });

		$('#btnEval').on('click', function () { try { var js= $('#inJs').val(); alert("EVAL '"+js+"'"); window.eval(js); } catch(e) { alert("ERR:"+e) }; return false; });

		$('#btnClear').on('click', function () { jsSet(""); return false; });

		$('#btnEx').on('click', function () { pathSetDflt();	return false; });
		pathSetDflt();

		getFile('inno/pg/0init.js',function (js) { try { window.eval(js);} catch(e) { alert("ERR:"+e) }; return false; });
	 }

	 document.addEventListener("deviceready", appReady, false);
	 document.addEventListener("DOMContentLoaded", appReady, false);
</script>
</head>
<body>
<div id="load">
		 <input id="inUrl" size=80></br>
		 <input id="btnGet" type="button" value="Get">
  	 <input id="btnFile" type="button" value="File"> 
		 <input id="btnEval" type="button" value="Eval"></br>
		 <input id="btnEx" type="button" value="ExUrl"></br>
		 <input id="btnClear" type="button" value="Clear"></br>
     <textarea id="inJs" cols=80 rows=25>
     </textarea>
</div>
</body>
</html>
